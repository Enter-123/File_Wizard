<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extract Video Thumbnail</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='video_thumbnail.css') }}">
    <style>
        video {
            max-width: 100%;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Extract Video Thumbnail</h1>

        <form action="/video_thumbnail" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="video">Choose a video:</label>
                <input type="file" name="video" accept="video/*" id="videoInput" required>
            </div>
            <div class="form-group">
                <label for="time">Enter timestamp (seconds):</label>
                <input type="text" name="time" placeholder="e.g., 60 (for 1 minute)" required>
            </div>

            <!-- Video Preview Section -->
            <div class="form-group" id="videoPreviewContainer" style="display: none;">
                <label for="videoPreview"></label>
                <video id="videoPreview" controls>
                    <source id="videoSource" src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>

            <div class="form-group">
                <button type="submit">Extract Thumbnail</button>
            </div>
        </form>
    </div>



        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="message-box">
                    <ul>
                        {% for message in messages %}
                            <li><strong>{{ category }}:</strong> {{ message }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
        {% endwith %}
        
    <script>
        // JavaScript to handle video preview
        const videoInput = document.getElementById('videoInput');
        const videoPreviewContainer = document.getElementById('videoPreviewContainer');
        const videoPreview = document.getElementById('videoPreview');
        const videoSource = document.getElementById('videoSource');

        videoInput.addEventListener('change', function () {
            const file = videoInput.files[0];
            if (file) {
                // Show the video preview container
                videoPreviewContainer.style.display = 'block';

                // Set the video source to the selected file
                const videoURL = URL.createObjectURL(file);
                videoSource.src = videoURL;
                videoPreview.load(); // Load the video for preview
            }
        });
    </script>
</body>
</html>
