<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{url_for('static', filename='image_resizer.css')}}">
    <title>Image Resizer</title>
</head>
<body>
    <h1>Resize Your Image</h1>

        <form action="/image_resizer" method="POST" enctype="multipart/form-data">
            <label for="file">Choose an image:</label>
            <input type="file" name="file" id="fileInput" accept="image/*" required>
            <br><br>

            <!-- Display original image size -->
            <p id="originalSize"></p>

            <label for="width">Width (in pixels):</label>
            <input type="text" name="width" id="widthInput" required>
            <br><br>
            <label for="height">Height (in pixels):</label>
            <input type="text" name="height" id="heightInput" required>
            <br><br>
            <button type="submit">Resize Image</button>
        </form>


    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul>
                {% for message in messages %}
                    <li class="flash-message"> {{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <script>
    const fileInput = document.getElementById('fileInput');
    const originalSize = document.getElementById('originalSize');
    const widthInput = document.getElementById('widthInput');
    const heightInput = document.getElementById('heightInput');

    fileInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            const img = new Image();
            img.src = URL.createObjectURL(file);

            img.onload = function() {
                const width = img.width;
                const height = img.height;

                originalSize.textContent = `Original size: ${width} x ${height} pixels`;

                // Auto-fill width and height fields
                widthInput.value = width;
                heightInput.value = height;

                URL.revokeObjectURL(img.src); // free memory
            }
        }
    });
</script>

</body>
</html>
